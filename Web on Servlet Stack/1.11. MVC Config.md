# 1.11. MVC Config

<!-- tabs:start -->

#### ** English **

[WebFlux](https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/web-reactive.html#webflux-config)
#### ** Chinese **

[WebFlux](https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/web-reactive.html#webflux-config)

<!-- tabs:end -->


<!-- tabs:start -->

#### ** English **

The MVC Java configuration and the MVC XML namespace provide default configuration suitable for most applications and a configuration API to customize it.
#### ** Chinese **

MVC Java配置和MVC XML命名空间提供了适合大多数应用程序的默认配置，并提供了一个配置API来定制。

<!-- tabs:end -->


<!-- tabs:start -->

#### ** English **

For more advanced customizations, which are not available in the configuration API, see [Advanced Java Config](https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/web.html#mvc-config-advanced-java) and [Advanced XML Config](https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/web.html#mvc-config-advanced-xml).
#### ** Chinese **

关于配置API中无法提供的更多高级定制，请参阅[Advanced Java Config](https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/web.html#mvc-config-advanced-java)和[Advanced XML Config](https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/web.html#mvc-config-advanced-xml)。

<!-- tabs:end -->


<!-- tabs:start -->

#### ** English **

You do not need to understand the underlying beans created by the MVC Java configuration and the MVC namespace. If you want to learn more, see [Special Bean Types](https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/web.html#mvc-servlet-special-bean-types) and [Web MVC Config](https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/web.html#mvc-servlet-config).
#### ** Chinese **

你不需要了解MVC Java配置和MVC命名空间创建的底层Bean。如果你想了解更多，请参阅[特殊Bean类型](https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/web.html#mvc-servlet-special-bean-types)和[Web MVC配置](https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/web.html#mvc-servlet-config)。

<!-- tabs:end -->


### **1.11.1. Enable MVC Configuration** 

<!-- tabs:start -->

#### ** English **

[WebFlux](https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/web-reactive.html#webflux-config-enable)
#### ** Chinese **

[WebFlux](https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/web-reactive.html#webflux-config-enable)

<!-- tabs:end -->


<!-- tabs:start -->

#### ** English **

In Java configuration, you can use the `@EnableWebMvc` annotation to enable MVC configuration, as the following example shows:
#### ** Chinese **

在Java配置中，你可以使用`@EnableWebMvc`注释来启用MVC配置，如下例所示。

<!-- tabs:end -->


```java
@Configuration
@EnableWebMvc
public class WebConfig {
}
```

<!-- tabs:start -->

#### ** English **

In XML configuration, you can use the `<mvc:annotation-driven>` element to enable MVC configuration, as the following example shows:
#### ** Chinese **

在XML配置中，可以使用`<mvc:annotation-driven>`元素来启用MVC配置，如下例所示。

<!-- tabs:end -->


```xml
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans
        https://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/mvc
        https://www.springframework.org/schema/mvc/spring-mvc.xsd">

    <mvc:annotation-driven/>

</beans>
```

<!-- tabs:start -->

#### ** English **

The preceding example registers a number of Spring MVC [infrastructure beans](https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/web.html#mvc-servlet-special-bean-types) and adapts to dependencies available on the classpath (for example, payload converters for JSON, XML, and others).
#### ** Chinese **

前面的例子注册了一些Spring MVC[基础设施Bean](https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/web.html#mvc-servlet-special-bean-types)，并适应了classpath上可用的依赖关系(例如，JSON、XML等的payload转换器)。

<!-- tabs:end -->


### **1.11.2. MVC Config API** 

<!-- tabs:start -->

#### ** English **

[WebFlux](https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/web-reactive.html#webflux-config-customize)
#### ** Chinese **

[WebFlux](https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/web-reactive.html#webflux-config-customize)

<!-- tabs:end -->


<!-- tabs:start -->

#### ** English **

In Java configuration, you can implement the `WebMvcConfigurer` interface, as the following example shows:
#### ** Chinese **

在Java配置中，可以实现`WebMvcConfigurer`接口，如下例所示。

<!-- tabs:end -->


```java
@Configuration
@EnableWebMvc
public class WebConfig implements WebMvcConfigurer {

    // Implement configuration methods...
}
```

<!-- tabs:start -->

#### ** English **

In XML, you can check attributes and sub-elements of `<mvc:annotation-driven/>`. You can view the [Spring MVC XML schema](https://schema.spring.io/mvc/spring-mvc.xsd) or use the code completion feature of your IDE to discover what attributes and sub-elements are available.
#### ** Chinese **

在XML中，你可以检查`<mvc:annotation-driven/>`的属性和子元素。你可以查看[Spring MVC XML schema](https://schema.spring.io/mvc/spring-mvc.xsd)，或者使用IDE的代码完成功能来发现哪些属性和子元素是可用的。

<!-- tabs:end -->


### **1.11.3. Type Conversion** 

<!-- tabs:start -->

#### ** English **

[WebFlux](https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/web-reactive.html#webflux-config-conversion)
#### ** Chinese **

[WebFlux](https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/web-reactive.html#webflux-config-conversion)

<!-- tabs:end -->


<!-- tabs:start -->

#### ** English **

By default, formatters for various number and date types are installed, along with support for customization via `@NumberFormat` and `@DateTimeFormat` on fields.
#### ** Chinese **

默认情况下，已经安装了各种数字和日期类型的格式化，并支持通过字段上的`@NumberFormat`和`@DateTimeFormat`进行自定义。

<!-- tabs:end -->


<!-- tabs:start -->

#### ** English **

To register custom formatters and converters in Java config, use the following:
#### ** Chinese **

要在Java配置中注册自定义的格式化和转换器，请使用以下方法。

<!-- tabs:end -->


```java
@Configuration
@EnableWebMvc
public class WebConfig implements WebMvcConfigurer {

    @Override
    public void addFormatters(FormatterRegistry registry) {
        // ...
    }
}
```

<!-- tabs:start -->

#### ** English **

To do the same in XML config, use the following:
#### ** Chinese **

要在XML配置中进行同样的操作，请使用下面的方法。

<!-- tabs:end -->


```xml
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans
        https://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/mvc
        https://www.springframework.org/schema/mvc/spring-mvc.xsd">

    <mvc:annotation-driven conversion-service="conversionService"/>

    <bean id="conversionService"
            class="org.springframework.format.support.FormattingConversionServiceFactoryBean">
        <property name="converters">
            <set>
                <bean class="org.example.MyConverter"/>
            </set>
        </property>
        <property name="formatters">
            <set>
                <bean class="org.example.MyFormatter"/>
                <bean class="org.example.MyAnnotationFormatterFactory"/>
            </set>
        </property>
        <property name="formatterRegistrars">
            <set>
                <bean class="org.example.MyFormatterRegistrar"/>
            </set>
        </property>
    </bean>

</beans>
```

<!-- tabs:start -->

#### ** English **

By default Spring MVC considers the request Locale when parsing and formatting date values. This works for forms where dates are represented as Strings with "input" form fields. For "date" and "time" form fields, however, browsers use a fixed format defined in the HTML spec. For such cases date and time formatting can be customized as follows:
#### ** Chinese **

默认情况下，Spring MVC在解析和格式化日期值时，会考虑到请求的Locale。这适用于用 "输入 "表单字段的日期表示为字符串的表单。但是，对于 "日期 "和 "时间 "表单字段，浏览器使用HTML规范中定义的固定格式。对于这种情况，日期和时间的格式化可以按照以下方式进行自定义。

<!-- tabs:end -->


```java
@Configuration
@EnableWebMvc
public class WebConfig implements WebMvcConfigurer {

    @Override
    public void addFormatters(FormatterRegistry registry) {
        DateTimeFormatterRegistrar registrar = new DateTimeFormatterRegistrar();
        registrar.setUseIsoFormat(true);
        registrar.registerFormatters(registry);
    }
}
```

<!-- tabs:start -->

#### ** English **

See [the ](https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/core.html#format-FormatterRegistrar-SPI)[`FormatterRegistrar`](https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/core.html#format-FormatterRegistrar-SPI)[ SPI](https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/core.html#format-FormatterRegistrar-SPI) and the `FormattingConversionServiceFactoryBean` for more information on when to use FormatterRegistrar implementations.
#### ** Chinese **

有关何时使用FormatterRegistrar实现的更多信息，请参阅[the ](https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/core.html#format-FormatterRegistrar-SPI)[`FormatterRegistrar`](https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/core.html#format-FormatterRegistrar-SPI)[`FormattingConversionServiceFactoryBean`和`FormattingConversionServiceFactoryBean`，以了解何时使用FormatterRegistrar实现。

<!-- tabs:end -->


### **1.11.4. Validation** 

<!-- tabs:start -->

#### ** English **

[WebFlux](https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/web-reactive.html#webflux-config-validation)
#### ** Chinese **

[WebFlux](https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/web-reactive.html#webflux-config-validation)

<!-- tabs:end -->


<!-- tabs:start -->

#### ** English **

By default, if [Bean Validation](https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/core.html#validation-beanvalidation-overview) is present on the classpath (for example, Hibernate Validator), the `LocalValidatorFactoryBean` is registered as a global [Validator](https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/core.html#validator) for use with `@Valid` and `Validated` on controller method arguments.
#### ** Chinese **

默认情况下，如果[Bean Validation](https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/core.html#validation-beanvalidation-overview)存在于classpath上（例如，Hibernate Validator），那么`LocalValidatorFactoryBean`会被注册为全局[Validator](https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/core.html#validator)，用于控制器方法参数上的`@Valid`和`Validated`。

<!-- tabs:end -->


<!-- tabs:start -->

#### ** English **

In Java configuration, you can customize the global `Validator` instance, as the following example shows:
#### ** Chinese **

在Java配置中，你可以自定义全局`Validator`实例，如下例所示。

<!-- tabs:end -->


```java
@Configuration
@EnableWebMvc
public class WebConfig implements WebMvcConfigurer {

    @Override
    public Validator getValidator() {
        // ...
    }
}
```

<!-- tabs:start -->

#### ** English **

The following example shows how to achieve the same configuration in XML:
#### ** Chinese **

下面的例子显示了如何在XML中实现同样的配置。

<!-- tabs:end -->


```xml
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans
        https://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/mvc
        https://www.springframework.org/schema/mvc/spring-mvc.xsd">

    <mvc:annotation-driven validator="globalValidator"/>

</beans>
```

<!-- tabs:start -->

#### ** English **

Note that you can also register `Validator` implementations locally, as the following example shows:
#### ** Chinese **

注意，你也可以在本地注册`Validator`实现，如下例所示。

<!-- tabs:end -->


```java
@Controller
public class MyController {

    @InitBinder
    protected void initBinder(WebDataBinder binder) {
        binder.addValidators(new FooValidator());
    }
}
```

<!-- tabs:start -->

#### ** English **

If you need to have a `LocalValidatorFactoryBean` injected somewhere, create a bean and mark it with `@Primary` in order to avoid conflict with the one declared in the MVC configuration.
#### ** Chinese **

如果你需要在某个地方注入一个`LocalValidatorFactoryBean`，请创建一个Bean，并将其标记为`@Primary`，以避免与MVC配置中声明的Bean冲突。

<!-- tabs:end -->


### **1.11.5. Interceptors** 

<!-- tabs:start -->

#### ** English **

In Java configuration, you can register interceptors to apply to incoming requests, as the following example shows:
#### ** Chinese **

在Java配置中，可以注册拦截器来应用于传入的请求，如下例所示。

<!-- tabs:end -->


```java
@Configuration
@EnableWebMvc
public class WebConfig implements WebMvcConfigurer {

    @Override
    public void addInterceptors(InterceptorRegistry registry) {
        registry.addInterceptor(new LocaleChangeInterceptor());
        registry.addInterceptor(new ThemeChangeInterceptor()).addPathPatterns("/**").excludePathPatterns("/admin/**");
        registry.addInterceptor(new SecurityInterceptor()).addPathPatterns("/secure/*");
    }
}
```

<!-- tabs:start -->

#### ** English **

The following example shows how to achieve the same configuration in XML:
#### ** Chinese **

下面的例子显示了如何在XML中实现同样的配置。

<!-- tabs:end -->


```xml
<mvc:interceptors>
    <bean class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor"/>
    <mvc:interceptor>
        <mvc:mapping path="/**"/>
        <mvc:exclude-mapping path="/admin/**"/>
        <bean class="org.springframework.web.servlet.theme.ThemeChangeInterceptor"/>
    </mvc:interceptor>
    <mvc:interceptor>
        <mvc:mapping path="/secure/*"/>
        <bean class="org.example.SecurityInterceptor"/>
    </mvc:interceptor>
</mvc:interceptors>
```

### **1.11.6. Content Types** 

<!-- tabs:start -->

#### ** English **

[WebFlux](https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/web-reactive.html#webflux-config-content-negotiation)
#### ** Chinese **

[WebFlux](https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/web-reactive.html#webflux-config-content-negotiation)

<!-- tabs:end -->


<!-- tabs:start -->

#### ** English **

You can configure how Spring MVC determines the requested media types from the request (for example, `Accept` header, URL path extension, query parameter, and others).
#### ** Chinese **

您可以配置Spring MVC如何从请求中确定请求的媒体类型（例如，`Accept`头、URL路径扩展、查询参数等）。

<!-- tabs:end -->


<!-- tabs:start -->

#### ** English **

By default, the URL path extension is checked first — with `json`, `xml`, `rss`, and `atom` registered as known extensions (depending on classpath dependencies). The `Accept` header is checked second.
#### ** Chinese **

默认情况下，URL 路径扩展被首先检查--`json`、`xml`、`rss`和`atom`被注册为已知的扩展（取决于classpath依赖关系）。`Accept`头会被检查第二次。

<!-- tabs:end -->


<!-- tabs:start -->

#### ** English **

Consider changing those defaults to `Accept` header only, and, if you must use URL-based content type resolution, consider using the query parameter strategy over path extensions. See [Suffix Match](https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/web.html#mvc-ann-requestmapping-suffix-pattern-match) and [Suffix Match and RFD](https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/web.html#mvc-ann-requestmapping-rfd) for more details.
#### ** Chinese **

考虑将这些默认值改为`Accept`头，如果必须使用基于URL的内容类型解析，考虑使用查询参数策略而不是路径扩展。有关详细信息，请参阅[后缀匹配](https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/web.html#mvc-ann-requestmapping-suffix-pattern-match)和[后缀匹配和RFD](https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/web.html#mvc-ann-requestmapping-rfd)。

<!-- tabs:end -->


<!-- tabs:start -->

#### ** English **

In Java configuration, you can customize requested content type resolution, as the following example shows:
#### ** Chinese **

在Java配置中，可以自定义请求的内容类型分辨率，如下图所示。

<!-- tabs:end -->


```java
@Configuration
@EnableWebMvc
public class WebConfig implements WebMvcConfigurer {

    @Override
    public void configureContentNegotiation(ContentNegotiationConfigurer configurer) {
        configurer.mediaType("json", MediaType.APPLICATION_JSON);
        configurer.mediaType("xml", MediaType.APPLICATION_XML);
    }
}
```

<!-- tabs:start -->

#### ** English **

The following example shows how to achieve the same configuration in XML:
#### ** Chinese **

下面的例子显示了如何在XML中实现同样的配置。

<!-- tabs:end -->


```xml
<mvc:annotation-driven content-negotiation-manager="contentNegotiationManager"/>

<bean id="contentNegotiationManager" class="org.springframework.web.accept.ContentNegotiationManagerFactoryBean">
    <property name="mediaTypes">
        <value>
            json=application/json
            xml=application/xml
        </value>
    </property>
</bean>
```

### **1.11.7. Message Converters** 

<!-- tabs:start -->

#### ** English **

[WebFlux](https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/web-reactive.html#webflux-config-message-codecs)
#### ** Chinese **

[WebFlux](https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/web-reactive.html#webflux-config-message-codecs)

<!-- tabs:end -->


<!-- tabs:start -->

#### ** English **

You can customize `HttpMessageConverter` in Java configuration by overriding [`configureMessageConverters()`](https://docs.spring.io/spring-framework/docs/5.2.6.RELEASE/javadoc-api/org/springframework/web/servlet/config/annotation/WebMvcConfigurer.html#configureMessageConverters-java.util.List-) (to replace the default converters created by Spring MVC) or by overriding [`extendMessageConverters()`](https://docs.spring.io/spring-framework/docs/5.2.6.RELEASE/javadoc-api/org/springframework/web/servlet/config/annotation/WebMvcConfigurer.html#extendMessageConverters-java.util.List-) (to customize the default converters or add additional converters to the default ones).
#### ** Chinese **

您可以通过重载 [`configureMessageConverters()`](https://docs.spring.io/spring-framework/docs/5.2.6.RELEASE/javadoc-api/org/springframework/web/servlet/config/annotation/WebMvcConfigurer.html#configureMessageConverters-java.util.List-)（替换由Spring MVC创建的默认转换器）或通过重载 [`extendMessageConverters()`](https://docs.spring.io/spring-framework/docs/5.2.6.RELEASE/javadoc-api/org/springframework/web/servlet/config/annotation/WebMvcConfigurer.html#extendMessageConverters-java.util.List-)（自定义默认转换器或在默认转换器的基础上添加额外的转换器），在Java配置中自定义`HttpMessageConverter`。

<!-- tabs:end -->


<!-- tabs:start -->

#### ** English **

The following example adds XML and Jackson JSON converters with a customized `ObjectMapper` instead of the default ones:
#### ** Chinese **

下面的示例用自定义的`ObjectMapper`代替了默认的`ObjectMapper`添加了XML和JSON JSON转换器。

<!-- tabs:end -->


```java
@Configuration
@EnableWebMvc
public class WebConfiguration implements WebMvcConfigurer {

    @Override
    public void configureMessageConverters(List<HttpMessageConverter<?>> converters) {
        Jackson2ObjectMapperBuilder builder = new Jackson2ObjectMapperBuilder()
                .indentOutput(true)
                .dateFormat(new SimpleDateFormat("yyyy-MM-dd"))
                .modulesToInstall(new ParameterNamesModule());
        converters.add(new MappingJackson2HttpMessageConverter(builder.build()));
        converters.add(new MappingJackson2XmlHttpMessageConverter(builder.createXmlMapper(true).build()));
    }
}
```

<!-- tabs:start -->

#### ** English **

In the preceding example, [`Jackson2ObjectMapperBuilder`](https://docs.spring.io/spring-framework/docs/5.2.6.RELEASE/javadoc-api/org/springframework/http/converter/json/Jackson2ObjectMapperBuilder.html) is used to create a common configuration for both `MappingJackson2HttpMessageConverter` and `MappingJackson2XmlHttpMessageConverter` with indentation enabled, a customized date format, and the registration of [`jackson-module-parameter-names`](https://github.com/FasterXML/jackson-module-parameter-names), Which adds support for accessing parameter names (a feature added in Java 8).
#### ** Chinese **

在前面的例子中，[`Jackson2ObjectMapperBuilder`](https://docs.spring.io/spring-framework/docs/5.2.6.RELEASE/javadoc-api/org/springframework/http/converter/json/Jackson2ObjectMapperBuilder. html)用于为`MappingJackson2HttpMessageConverter`和`MappingJackson2XmlHttpMessageConverter`创建一个通用配置，并启用了缩进、自定义的日期格式，以及[`jackson-module-parameter-names`](https://github.com/FasterXML/jackson-module-parameter-names)的注册，它增加了对访问参数名称的支持（Java 8中添加的一个功能）。

<!-- tabs:end -->


<!-- tabs:start -->

#### ** English **

This builder customizes Jackson’s default properties as follows:
#### ** Chinese **

该构建器将Jackson的默认属性定制如下。

<!-- tabs:end -->


<!-- tabs:start -->

#### ** English **

- [`DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES`](https://fasterxml.github.io/jackson-databind/javadoc/2.6/com/fasterxml/jackson/databind/DeserializationFeature.html#FAIL_ON_UNKNOWN_PROPERTIES) is disabled.

- [`MapperFeature.DEFAULT_VIEW_INCLUSION`](https://fasterxml.github.io/jackson-databind/javadoc/2.6/com/fasterxml/jackson/databind/MapperFeature.html#DEFAULT_VIEW_INCLUSION) is disabled.

#### ** Chinese **

- [`DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES`](https://fasterxml.github.io/jackson-databind/javadoc/2.6/com/fasterxml/jackson/databind/DeserializationFeature.html#FAIL_ON_UNKNOWN_PROPERTIES)被禁用。

- [`MapperFeature.DEFAULT_VIEW_INCLUSION`](https://fasterxml.github.io/jackson-databind/javadoc/2.6/com/fasterxml/jackson/databind/MapperFeature.html#DEFAULT_VIEW_INCLUSION)已禁用。


<!-- tabs:end -->

<!-- tabs:start -->

#### ** English **

It also automatically registers the following well-known modules if they are detected on the classpath:
#### ** Chinese **

如果在classpath上检测到以下知名模块，它也会自动注册。

<!-- tabs:end -->


<!-- tabs:start -->

#### ** English **

- [jackson-datatype-joda](https://github.com/FasterXML/jackson-datatype-joda): Support for Joda-Time types.

- [jackson-datatype-jsr310](https://github.com/FasterXML/jackson-datatype-jsr310): Support for Java 8 Date and Time API types.

- [jackson-datatype-jdk8](https://github.com/FasterXML/jackson-datatype-jdk8): Support for other Java 8 types, such as `Optional`.

- [`jackson-module-kotlin`](https://github.com/FasterXML/jackson-module-kotlin): Support for Kotlin classes and data classes.

#### ** Chinese **

- [jackson-datatatype-joda](https://github.com/FasterXML/jackson-datatype-joda)。支持Joda-TIME类型。

- [jackson-datatype-jsr310](https://github.com/FasterXML/jackson-datatype-jsr310): 支持Java 8日期和时间API类型。

- [jackson-datatype-jdk8](https://github.com/FasterXML/jackson-datatype-jdk8): 支持其他Java 8类型。支持其他Java 8类型，如`Optional`。

- [`jackson-module-kotlin`](https://github.com/FasterXML/jackson-module-kotlin)。支持Kotlin类和数据类。


<!-- tabs:end -->

<!-- tabs:start -->

#### ** English **

Enabling indentation with Jackson XML support requires [`woodstox-core-asl`](https://search.maven.org/#search%7Cgav%7C1%7Cg%3A%22org.codehaus.woodstox%22%20AND%20a%3A%22woodstox-core-asl%22) dependency in addition to [`jackson-dataformat-xml`](https://search.maven.org/#search%7Cga%7C1%7Ca%3A%22jackson-dataformat-xml%22) one.
#### ** Chinese **

除了[`jackson-dataformat-xml`](https://search.maven.org/#search%7Cga%7C1%7Ca%3A%22jackson-dataformat-xml%22)依赖项外，还需要[`woodstox-core-asl`](https://search.maven.org/#search%7Cga%7C1%7Ca%3A%22jackson-dataformat-xml%22)依赖项，才能使用Jackson XML支持启用缩进。

<!-- tabs:end -->


<!-- tabs:start -->

#### ** English **

Other interesting Jackson modules are available:
#### ** Chinese **

还有其他有趣的杰克逊模块。

<!-- tabs:end -->


<!-- tabs:start -->

#### ** English **

- [jackson-datatype-money](https://github.com/zalando/jackson-datatype-money): Support for `javax.money` types (unofficial module).

- [jackson-datatype-hibernate](https://github.com/FasterXML/jackson-datatype-hibernate): Support for Hibernate-specific types and properties (including lazy-loading aspects).

#### ** Chinese **

- [jackson-datatatype-money](https://github.com/zalando/jackson-datatype-money)。支持`javax.money`类型（非官方模块）。

- [jackson-datatype-hibernate](https://github.com/FasterXML/jackson-datatype-hibernate): 支持Hibernate特有的类型和属性（包括懒惰加载方面）。


<!-- tabs:end -->

<!-- tabs:start -->

#### ** English **

The following example shows how to achieve the same configuration in XML:
#### ** Chinese **

下面的例子显示了如何在XML中实现同样的配置。

<!-- tabs:end -->


```xml
<mvc:annotation-driven>
    <mvc:message-converters>
        <bean class="org.springframework.http.converter.json.MappingJackson2HttpMessageConverter">
            <property name="objectMapper" ref="objectMapper"/>
        </bean>
        <bean class="org.springframework.http.converter.xml.MappingJackson2XmlHttpMessageConverter">
            <property name="objectMapper" ref="xmlMapper"/>
        </bean>
    </mvc:message-converters>
</mvc:annotation-driven>

<bean id="objectMapper" class="org.springframework.http.converter.json.Jackson2ObjectMapperFactoryBean"
      p:indentOutput="true"
      p:simpleDateFormat="yyyy-MM-dd"
      p:modulesToInstall="com.fasterxml.jackson.module.paramnames.ParameterNamesModule"/>

<bean id="xmlMapper" parent="objectMapper" p:createXmlMapper="true"/>
```

### **1.11.8. View Controllers** 

<!-- tabs:start -->

#### ** English **

This is a shortcut for defining a `ParameterizableViewController` that immediately forwards to a view when invoked. You can use it in static cases when there is no Java controller logic to execute before the view generates the response.
#### ** Chinese **

这是定义`ParameterizableViewController`的捷径，当调用时，它可以立即转发到视图。当视图生成响应之前没有Java控制器逻辑执行时，可以在静态情况下使用它。

<!-- tabs:end -->


<!-- tabs:start -->

#### ** English **

The following example of Java configuration forwards a request for `/` to a view called `home`:
#### ** Chinese **

下面的Java配置示例将`/`请求转发到一个名为`home`的视图。

<!-- tabs:end -->


```java
@Configuration
@EnableWebMvc
public class WebConfig implements WebMvcConfigurer {

    @Override
    public void addViewControllers(ViewControllerRegistry registry) {
        registry.addViewController("/").setViewName("home");
    }
}
```

<!-- tabs:start -->

#### ** English **

The following example achieves the same thing as the preceding example, but with XML, by using the `<mvc:view-controller>` element:
#### ** Chinese **

下面的示例通过使用`<mvc:view-controller>`元素，实现了与前面的示例相同的功能，但使用XML。

<!-- tabs:end -->


```xml
<mvc:view-controller path="/" view-name="home"/>
```

<!-- tabs:start -->

#### ** English **

If an `@RequestMapping` method is mapped to a URL for any HTTP method then a view controller cannot be used to handle the same URL. This is because a match by URL to an annotated controller is considered a strong enough indication of endpoint ownership so that a 405 (METHOD_NOT_ALLOWED), a 415 (UNSUPPORTED_MEDIA_TYPE), or similar response can be sent to the client to help with debugging. For this reason it is recommended to avoid splitting URL handling across an annotated controller and a view controller.
#### ** Chinese **

如果一个`@RequestMapping`方法被映射到任何HTTP方法的URL，那么视图控制器不能用于处理相同的URL。这是因为通过 URL 与注释控制器的 URL 匹配被认为是端点所有权的强烈指示，因此可以向客户端发送 405 (METHOD_NOT_ALLOWED)、415 (UNSUPPORTEDIA_MEDIA_TYPE)或类似的响应以帮助调试。为此，建议避免将URL处理分开在注释控制器和视图控制器中进行。

<!-- tabs:end -->


### **1.11.9. View Resolvers** 

<!-- tabs:start -->

#### ** English **

[WebFlux](https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/web-reactive.html#webflux-config-view-resolvers)
#### ** Chinese **

[WebFlux](https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/web-reactive.html#webflux-config-view-resolvers)

<!-- tabs:end -->


<!-- tabs:start -->

#### ** English **

The MVC configuration simplifies the registration of view resolvers.
#### ** Chinese **

MVC配置简化了视图解析器的注册。

<!-- tabs:end -->


<!-- tabs:start -->

#### ** English **

The following Java configuration example configures content negotiation view resolution by using JSP and Jackson as a default `View` for JSON rendering:
#### ** Chinese **

下面的Java配置示例通过使用JSP和Jackson作为默认的`View`进行JSON渲染，配置内容协商视图解析。

<!-- tabs:end -->


```java
@Configuration
@EnableWebMvc
public class WebConfig implements WebMvcConfigurer {

    @Override
    public void configureViewResolvers(ViewResolverRegistry registry) {
        registry.enableContentNegotiation(new MappingJackson2JsonView());
        registry.jsp();
    }
}
```

<!-- tabs:start -->

#### ** English **

The following example shows how to achieve the same configuration in XML:
#### ** Chinese **

下面的例子显示了如何在XML中实现同样的配置。

<!-- tabs:end -->


```xml
<mvc:view-resolvers>
    <mvc:content-negotiation>
        <mvc:default-views>
            <bean class="org.springframework.web.servlet.view.json.MappingJackson2JsonView"/>
        </mvc:default-views>
    </mvc:content-negotiation>
    <mvc:jsp/>
</mvc:view-resolvers>
```

<!-- tabs:start -->

#### ** English **

Note, however, that FreeMarker, Tiles, Groovy Markup, and script templates also require configuration of the underlying view technology.
#### ** Chinese **

但请注意，FreeMarker、Tiles、Groovy Markup和脚本模板也需要配置底层视图技术。

<!-- tabs:end -->


<!-- tabs:start -->

#### ** English **

The MVC namespace provides dedicated elements. The following example works with FreeMarker:
#### ** Chinese **

MVC命名空间提供了专用元素。下面的例子可以和FreeMarker一起使用。

<!-- tabs:end -->


```xml
<mvc:view-resolvers>
    <mvc:content-negotiation>
        <mvc:default-views>
            <bean class="org.springframework.web.servlet.view.json.MappingJackson2JsonView"/>
        </mvc:default-views>
    </mvc:content-negotiation>
    <mvc:freemarker cache="false"/>
</mvc:view-resolvers>

<mvc:freemarker-configurer>
    <mvc:template-loader-path location="/freemarker"/>
</mvc:freemarker-configurer>
```

<!-- tabs:start -->

#### ** English **

In Java configuration, you can add the respective `Configurer` bean, as the following example shows:
#### ** Chinese **

在Java配置中，可以添加相应的`Configurer` bean，如下例所示。

<!-- tabs:end -->


```java
@Configuration
@EnableWebMvc
public class WebConfig implements WebMvcConfigurer {

    @Override
    public void configureViewResolvers(ViewResolverRegistry registry) {
        registry.enableContentNegotiation(new MappingJackson2JsonView());
        registry.freeMarker().cache(false);
    }

    @Bean
    public FreeMarkerConfigurer freeMarkerConfigurer() {
        FreeMarkerConfigurer configurer = new FreeMarkerConfigurer();
        configurer.setTemplateLoaderPath("/freemarker");
        return configurer;
    }
}
```

### **1.11.10. Static Resources** 

<!-- tabs:start -->

#### ** English **

[WebFlux](https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/web-reactive.html#webflux-config-static-resources)
#### ** Chinese **

[WebFlux](https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/web-reactive.html#webflux-config-static-resources)

<!-- tabs:end -->


<!-- tabs:start -->

#### ** English **

This option provides a convenient way to serve static resources from a list of [`Resource`](https://docs.spring.io/spring-framework/docs/5.2.6.RELEASE/javadoc-api/org/springframework/core/io/Resource.html)-based locations.
#### ** Chinese **

这个选项提供了一种方便的方法，可以从基于[`Resource`](https://docs.spring.io/spring-framework/docs/5.2.6.RELEASE/javadoc-api/org/springframework/core/io/Resource.html)的位置列表中服务静态资源。

<!-- tabs:end -->


<!-- tabs:start -->

#### ** English **

In the next example, given a request that starts with `/resources`, the relative path is used to find and serve static resources relative to `/public` under the web application root or on the classpath under `/static`. The resources are served with a one-year future expiration to ensure maximum use of the browser cache and a reduction in HTTP requests made by the browser. The `Last-Modified` header is also evaluated and, if present, a `304` status code is returned.
#### ** Chinese **

在下一个例子中，给定一个以`/resources`开头的请求，相对路径用于查找和服务于Web应用根目录下的`/public`或`/static`下的classpath上的静态资源。这些资源在服务时有一年的未来失效期，以确保最大限度地使用浏览器缓存，并减少浏览器的HTTP请求。`Last-Modified`头也会被评估，如果存在，则返回一个`304`状态代码。

<!-- tabs:end -->


<!-- tabs:start -->

#### ** English **

The following listing shows how to do so with Java configuration:
#### ** Chinese **

下面的列表显示了如何通过Java配置来实现。

<!-- tabs:end -->


```java
@Configuration
@EnableWebMvc
public class WebConfig implements WebMvcConfigurer {

    @Override
    public void addResourceHandlers(ResourceHandlerRegistry registry) {
        registry.addResourceHandler("/resources/**")
            .addResourceLocations("/public", "classpath:/static/")
            .setCachePeriod(31556926);
    }
}
```

<!-- tabs:start -->

#### ** English **

The following example shows how to achieve the same configuration in XML:
#### ** Chinese **

下面的例子显示了如何在XML中实现同样的配置。

<!-- tabs:end -->


```xml
<mvc:resources mapping="/resources/**"
    location="/public, classpath:/static/"
    cache-period="31556926" />
```

<!-- tabs:start -->

#### ** English **

See also [HTTP caching support for static resources](https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/web.html#mvc-caching-static-resources).
#### ** Chinese **

参见【HTTP缓存对静态资源的支持】(https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/web.html#mvc-caching-static-resources)。

<!-- tabs:end -->


<!-- tabs:start -->

#### ** English **

The resource handler also supports a chain of [`ResourceResolver`](https://docs.spring.io/spring-framework/docs/5.2.6.RELEASE/javadoc-api/org/springframework/web/servlet/resource/ResourceResolver.html) implementations and [`ResourceTransformer`](https://docs.spring.io/spring-framework/docs/5.2.6.RELEASE/javadoc-api/org/springframework/web/servlet/resource/ResourceTransformer.html) implementations, which you can use to create a toolchain for working with optimized resources.
#### ** Chinese **

资源处理程序还支持[`ResourceResolver`](https://docs.spring.io/spring-framework/docs/5.2.6.RELEASE/javadoc-api/org/springframework/web/servlet/resource/ResourceResolver.html)实现和[`ResourceTransformer`](https://docs.spring.io/spring-framework/docs/5.2.6.RELEASE/javadoc-api/org/springframework/web/servlet/resource/ResourceTransformer.html)实现，你可以用它来创建一个工具链来处理优化资源。

<!-- tabs:end -->


<!-- tabs:start -->

#### ** English **

You can use the `VersionResourceResolver` for versioned resource URLs based on an MD5 hash computed from the content, a fixed application version, or other. A `ContentVersionStrategy` (MD5 hash) is a good choice — with some notable exceptions, such as JavaScript resources used with a module loader.
#### ** Chinese **

你可以使用`VersionResourceResolver`，根据从内容、固定的应用程序版本或其他版本计算出的MD5哈希，来实现资源URL的版本化。`ContentVersionStrategy`（MD5哈希）是一个很好的选择--但也有一些明显的例外，例如与模块加载器一起使用的JavaScript资源。

<!-- tabs:end -->


<!-- tabs:start -->

#### ** English **

The following example shows how to use `VersionResourceResolver` in Java configuration:
#### ** Chinese **

下面的示例显示了如何在Java配置中使用`VersionResourceResolver`。

<!-- tabs:end -->


```java
@Configuration
@EnableWebMvc
public class WebConfig implements WebMvcConfigurer {

    @Override
    public void addResourceHandlers(ResourceHandlerRegistry registry) {
        registry.addResourceHandler("/resources/**")
                .addResourceLocations("/public/")
                .resourceChain(true)
                .addResolver(new VersionResourceResolver().addContentVersionStrategy("/**"));
    }
}
```

<!-- tabs:start -->

#### ** English **

The following example shows how to achieve the same configuration in XML:
#### ** Chinese **

下面的例子显示了如何在XML中实现同样的配置。

<!-- tabs:end -->


```xml
<mvc:resources mapping="/resources/**" location="/public/">
    <mvc:resource-chain resource-cache="true">
        <mvc:resolvers>
            <mvc:version-resolver>
                <mvc:content-version-strategy patterns="/**"/>
            </mvc:version-resolver>
        </mvc:resolvers>
    </mvc:resource-chain>
</mvc:resources>
```

<!-- tabs:start -->

#### ** English **

You can then use `ResourceUrlProvider` to rewrite URLs and apply the full chain of resolvers and transformers — for example, to insert versions. The MVC configuration provides a `ResourceUrlProvider` bean so that it can be injected into others. You can also make the rewrite transparent with the `ResourceUrlEncodingFilter` for Thymeleaf, JSPs, FreeMarker, and others with URL tags that rely on `HttpServletResponse#encodeURL`.
#### ** Chinese **

然后你可以使用`ResourceUrlProvider`来重写URL，并应用完整的解析器和转换器链--例如，插入版本。MVC配置提供了一个`ResourceUrlProvider` bean，这样就可以将其注入到其他的Bean中。你也可以用`ResourceUrlEncodingFilter`为Thymeleaf、JSPs、FreeMarker和其他依赖`HttpServletResponse#encodeURL`的URL标签的URL重写透明化。

<!-- tabs:end -->


<!-- tabs:start -->

#### ** English **

Note that, when using both `EncodedResourceResolver` (for example, for serving gzipped or brotli-encoded resources) and `VersionResourceResolver`, you must register them in this order. That ensures content-based versions are always computed reliably, based on the unencoded file.
#### ** Chinese **

请注意，当使用 `EncodedResourceResolver`（例如，用于提供gzipped或brotli编码的资源）和`VersionResourceResolver`时，必须按照这个顺序注册。这确保了基于内容的版本总是基于未编码的文件可靠地计算。

<!-- tabs:end -->


<!-- tabs:start -->

#### ** English **

[WebJars](https://www.webjars.org/documentation) are also supported through the `WebJarsResourceResolver` which is automatically registered when the `org.webjars:webjars-locator-core` library is present on the classpath. The resolver can re-write URLs to include the version of the jar and can also match against incoming URLs without versions — for example, from `/jquery/jquery.min.js` to `/jquery/1.2.0/jquery.min.js`.
#### ** Chinese **

WebJars](https://www.webjars.org/documentation)也可以通过`WebJarsResourceResolver`来支持，当classpath上有`org.webjars:webjars-locator-core`库时，它会自动注册。该解析器可以重写 URL 以包含 jar 的版本，也可以与没有版本的传入 URL 匹配 - 例如，从 `/jquery/jquery.min.js` 到 `/jquery/1.2.0/jquery.min.js`。

<!-- tabs:end -->


### **1.11.11. Default Servlet** 

<!-- tabs:start -->

#### ** English **

Spring MVC allows for mapping the `DispatcherServlet` to `/` (thus overriding the mapping of the container’s default Servlet), while still allowing static resource requests to be handled by the container’s default Servlet. It configures a `DefaultServletHttpRequestHandler` with a URL mapping of `/**` and the lowest priority relative to other URL mappings.
#### ** Chinese **

Spring MVC允许将`DispatcherServlet`映射到`/`（从而覆盖了容器的默认Servlet的映射），同时仍然允许静态资源请求由容器的默认Servlet处理。它配置了一个`DefaultServletHttpRequestHandler`DefaultServletHttpRequestHandler</x>，其URL映射为`/**`，相对于其他URL映射而言，其优先级最低。

<!-- tabs:end -->


<!-- tabs:start -->

#### ** English **

This handler forwards all requests to the default Servlet. Therefore, it must remain last in the order of all other URL `HandlerMappings`. That is the case if you use `<mvc:annotation-driven>`. Alternatively, if you set up your own customized `HandlerMapping` instance, be sure to set its `order` property to a value lower than that of the `DefaultServletHttpRequestHandler`, which is `Integer.MAX_VALUE`.
#### ** Chinese **

这个处理程序将所有请求转发到默认的Servlet。因此，它必须保持在所有其他URL `HandlerMappings`的顺序中排在最后。如果你使用`<mvc:annotation-driven>`，就是这种情况。另外，如果你设置了自己的自定义的`HandlerMapping`实例，请确保将其`order`属性设置为低于`DefaultServletHttpRequestHandler`的值，即`Integer.MAX_VALUE`。

<!-- tabs:end -->


<!-- tabs:start -->

#### ** English **

The following example shows how to enable the feature by using the default setup:
#### ** Chinese **

下面的例子显示了如何通过使用默认设置启用该功能。

<!-- tabs:end -->


```java
@Configuration
@EnableWebMvc
public class WebConfig implements WebMvcConfigurer {

    @Override
    public void configureDefaultServletHandling(DefaultServletHandlerConfigurer configurer) {
        configurer.enable();
    }
}
```

<!-- tabs:start -->

#### ** English **

The following example shows how to achieve the same configuration in XML:
#### ** Chinese **

下面的例子显示了如何在XML中实现同样的配置。

<!-- tabs:end -->


```xml
<mvc:default-servlet-handler/>
```

<!-- tabs:start -->

#### ** English **

The caveat to overriding the `/` Servlet mapping is that the `RequestDispatcher` for the default Servlet must be retrieved by name rather than by path. The `DefaultServletHttpRequestHandler` tries to auto-detect the default Servlet for the container at startup time, using a list of known names for most of the major Servlet containers (including Tomcat, Jetty, GlassFish, JBoss, Resin, WebLogic, and WebSphere). If the default Servlet has been custom-configured with a different name, or if a different Servlet container is being used where the default Servlet name is unknown, then you must explicitly provide the default Servlet’s name, as the following example shows:
#### ** Chinese **

覆盖`/` Servlet 映射的注意事项是，默认Servlet的`RequestDispatcher`必须通过名称而不是路径来检索。`DefaultServletHttpRequestHandler`尝试在启动时使用大多数主要的Servlet容器（包括Tomcat、Jetty、GlassFish、JBoss、Resin、WebLogic和WebSphere）的已知名称列表，自动检测容器的默认Servlet。如果默认的Servlet已经被自定义配置了不同的名称，或者如果正在使用不同的Servlet容器，而默认的Servlet名称是未知的，那么您必须显式提供默认的Servlet的名称，如下例所示。

<!-- tabs:end -->


```java
@Configuration
@EnableWebMvc
public class WebConfig implements WebMvcConfigurer {

    @Override
    public void configureDefaultServletHandling(DefaultServletHandlerConfigurer configurer) {
        configurer.enable("myCustomDefaultServlet");
    }
}
```

<!-- tabs:start -->

#### ** English **

The following example shows how to achieve the same configuration in XML:
#### ** Chinese **

下面的例子显示了如何在XML中实现同样的配置。

<!-- tabs:end -->


```xml
<mvc:default-servlet-handler default-servlet-name="myCustomDefaultServlet"/>
```

### **1.11.12. Path Matching** 

<!-- tabs:start -->

#### ** English **

[WebFlux](https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/web-reactive.html#webflux-config-path-matching)
#### ** Chinese **

[WebFlux](https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/web-reactive.html#webflux-config-path-matching)

<!-- tabs:end -->


<!-- tabs:start -->

#### ** English **

You can customize options related to path matching and treatment of the URL. For details on the individual options, see the [`PathMatchConfigurer`](https://docs.spring.io/spring-framework/docs/5.2.6.RELEASE/javadoc-api/org/springframework/web/servlet/config/annotation/PathMatchConfigurer.html) javadoc.
#### ** Chinese **

你可以自定义与路径匹配和URL处理相关的选项。有关各个选项的详细信息，请参阅 [`PathMatchConfigurer`](https://docs.spring.io/spring-framework/docs/5.2.6.RELEASE/javadoc-api/org/springframework/web/servlet/config/annotation/PathMatchConfigurer.html) javadoc。

<!-- tabs:end -->


<!-- tabs:start -->

#### ** English **

The following example shows how to customize path matching in Java configuration:
#### ** Chinese **

下面的例子展示了如何在Java配置中自定义路径匹配。

<!-- tabs:end -->


```java
@Configuration
@EnableWebMvc
public class WebConfig implements WebMvcConfigurer {

    @Override
    public void configurePathMatch(PathMatchConfigurer configurer) {
        configurer
            .setUseTrailingSlashMatch(false)
            .setUseRegisteredSuffixPatternMatch(true)
            .setPathMatcher(antPathMatcher())
            .setUrlPathHelper(urlPathHelper())
            .addPathPrefix("/api", HandlerTypePredicate.forAnnotation(RestController.class));
    }

    @Bean
    public UrlPathHelper urlPathHelper() {
        //...
    }

    @Bean
    public PathMatcher antPathMatcher() {
        //...
    }
}
```

<!-- tabs:start -->

#### ** English **

The following example shows how to achieve the same configuration in XML:
#### ** Chinese **

下面的例子显示了如何在XML中实现同样的配置。

<!-- tabs:end -->


```xml
<mvc:annotation-driven>
    <mvc:path-matching
        trailing-slash="false"
        registered-suffixes-only="true"
        path-helper="pathHelper"
        path-matcher="pathMatcher"/>
</mvc:annotation-driven>

<bean id="pathHelper" class="org.example.app.MyPathHelper"/>
<bean id="pathMatcher" class="org.example.app.MyPathMatcher"/>
```

### **1.11.13. Advanced Java Config** 

<!-- tabs:start -->

#### ** English **

[WebFlux](https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/web-reactive.html#webflux-config-advanced-java)
#### ** Chinese **

[WebFlux](https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/web-reactive.html#webflux-config-advanced-java)

<!-- tabs:end -->


<!-- tabs:start -->

#### ** English **

`@EnableWebMvc` imports `DelegatingWebMvcConfiguration`, which:
#### ** Chinese **

`@EnableWebMvc`导入`DelegatingWebMvcConfiguration`，其中。

<!-- tabs:end -->


<!-- tabs:start -->

#### ** English **

- Provides default Spring configuration for Spring MVC applications

- Detects and delegates to `WebMvcConfigurer` implementations to customize that configuration.

#### ** Chinese **

- 为Spring MVC应用程序提供了默认的Spring配置

- 检测并委托给`WebMvcConfigurer`实现来定制该配置。


<!-- tabs:end -->

<!-- tabs:start -->

#### ** English **

For advanced mode, you can remove `@EnableWebMvc` and extend directly from `DelegatingWebMvcConfiguration` instead of implementing `WebMvcConfigurer`, as the following example shows:
#### ** Chinese **

对于高级模式，你可以删除`@EnableWebMvc`并直接从`DelegatingWebMvcConfiguration`中扩展，而不是实现`WebMvcConfigurer`，如下例所示。

<!-- tabs:end -->


```java
@Configuration
public class WebConfig extends DelegatingWebMvcConfiguration {

    // ...
}
```

<!-- tabs:start -->

#### ** English **

You can keep existing methods in `WebConfig`, but you can now also override bean declarations from the base class, and you can still have any number of other `WebMvcConfigurer` implementations on the classpath.
#### ** Chinese **

你可以保留`WebConfig`中的现有方法，但你现在也可以从基类中覆盖Bean声明，而且你仍然可以在classpath上有任意数量的其他`WebMvcConfigurer`实现。

<!-- tabs:end -->


### **1.11.14. Advanced XML Config** 

<!-- tabs:start -->

#### ** English **

The MVC namespace does not have an advanced mode. If you need to customize a property on a bean that you cannot change otherwise, you can use the `BeanPostProcessor` lifecycle hook of the Spring `ApplicationContext`, as the following example shows:
#### ** Chinese **

MVC命名空间没有高级模式。如果你需要定制一个Bean上的属性，而这个属性在其他情况下无法更改，你可以使用Spring `ApplicationContext`的`BeanPostProcessor`生命周期钩子，如下例所示。

<!-- tabs:end -->


```java
@Component
public class MyPostProcessor implements BeanPostProcessor {

    public Object postProcessBeforeInitialization(Object bean, String name) throws BeansException {
        // ...
    }
}
```

<!-- tabs:start -->

#### ** English **

Note that you need to declare `MyPostProcessor` as a bean, either explicitly in XML or by letting it be detected through a `<component-scan/>` declaration.
#### ** Chinese **

注意，你需要将 `MyPostProcessor`声明为 bean，可以在 XML 中显式地声明，也可以通过 `<component-scan/>`声明让它被检测到。

<!-- tabs:end -->


### **1.12. HTTP/2** 

<!-- tabs:start -->

#### ** English **

[WebFlux](https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/web-reactive.html#webflux-http2)
#### ** Chinese **

[WebFlux](https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/web-reactive.html#webflux-http2)

<!-- tabs:end -->


<!-- tabs:start -->

#### ** English **

Servlet 4 containers are required to support HTTP/2, and Spring Framework 5 is compatible with Servlet API 4. From a programming model perspective, there is nothing specific that applications need to do. However, there are considerations related to server configuration. For more details, see the [HTTP/2 wiki page](https://github.com/spring-projects/spring-framework/wiki/HTTP-2-support).
#### ** Chinese **

Servlet 4容器需要支持HTTP/2，Spring Framework 5与Servlet API 4兼容。从编程模型的角度来看，应用程序没有什么具体的需要做的事情。但是，有一些与服务器配置相关的考虑。更多详情，请参阅[HTTP/2 wiki页面](https://github.com/spring-projects/spring-framework/wiki/HTTP-2-support)。

<!-- tabs:end -->


<!-- tabs:start -->

#### ** English **

The Servlet API does expose one construct related to HTTP/2. You can use the `javax.servlet.http.PushBuilder` proactively push resources to clients, and it is supported as a [method argument](https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/web.html#mvc-ann-arguments) to `@RequestMapping` methods.
#### ** Chinese **

Servlet API 确实公开了一个与 HTTP/2 相关的构造。你可以使用`javax.servlet.http.PushBuilder`主动向客户端推送资源，并且它作为一个[方法参数](https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/web.html#mvc-ann-arguments)支持`@RequestMapping`方法。

<!-- tabs:end -->



[下一章](Spring-Framework-5.2.6.RELEASE/Web%20on%20Servlet%20Stack/2.%20REST%20Clients.md)


[回目录](Spring-Framework-5.2.6.RELEASE/summary.md)

[回首页](/README)
